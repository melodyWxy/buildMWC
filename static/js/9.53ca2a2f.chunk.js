(this["webpackJsonpmelody-world-client"]=this["webpackJsonpmelody-world-client"]||[]).push([[9],{286:function(e,t){},287:function(e,t){},307:function(e,t){},309:function(e,t){},541:function(e,t,n){},708:function(e,t,n){"use strict";n.r(t);var r,a,o=n(5),c=n.n(o),i=n(75),l=n(76),s=n(78),u=n(77),p=n(79),m=n(0),f=n.n(m),d=n(174),b=n(704),h=n(705),g=n(70),y=n(692),w=n(260),v=n(193),k=n(35),D=n(281),E=n.n(D),O=function(e){if("undefined"!==typeof e){var t=(e=e.substr(1)).split("&"),n={},r=[];return t.map((function(e,t){return r=e.split("="),"undefined"===typeof n[r[0]]&&(n[r[0]]=r[1]),null})),n}},j=(n(541),n(33)),I=(r=Object(k.b)((function(e){return{login:e.login}}),(function(e){return{dispatch:e}})),Object(w.f)(a=r(a=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).publicDer="",n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields((function(e,t){var r,a,o,i;return c.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:e||(r=window.location.search&&O(window.location.search),a=new E.a(n.publicDer),t.nickname=a.encrypt(t.nickname,"base64","utf8"),t.password=a.encrypt(t.password,"base64","utf8"),console.log("\u5c0f\u670b\u53cb\uff0c\u4f60\u662f\u770b\u4e0d\u89c1\u8d26\u53f7\u5bc6\u7801\u7684!",t),o=n.props.history,i=void 0===o?{}:o,n.props.dispatch({type:"USER_LOGIN",payload:{values:t,callback:function(){var e=r.callback||"/";i.push(e)}}}));case 1:case"end":return c.stop()}}))}))},n.linkToRegister=function(){var e=window.location.href.replace(window.location.origin+"/login","");n.props.history&&n.props.history.push("/register".concat(e))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.publicDer=window.localStorage.getItem("publicDer"),this.publicDer||Object(j.a)("/der/getPublicDer").then((function(t){200===t.code?(e.publicDer=t.data.publicDer,window.localStorage.setItem("publicDer",e.publicDer)):d.a.error(t.msg||"\u83b7\u53d6\u516c\u94a5\u5931\u8d25\uff01")})).catch((function(e){console.log(e),d.a.error("\u83b7\u53d6\u516c\u94a5\u5931\u8d25\uff01\u60a8\u7684\u7f51\u7edc\u662f\u5426\u5df2\u6253\u5f00\uff1f")}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return f.a.createElement(b.a,{onSubmit:this.handleSubmit,className:"login-form"},f.a.createElement(b.a.Item,null,e("nickname",{rules:[{required:!0,message:"Please input your username or nickname!"}]})(f.a.createElement(h.a,{prefix:f.a.createElement(g.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),f.a.createElement(b.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(f.a.createElement(h.a,{prefix:f.a.createElement(g.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),f.a.createElement(b.a.Item,null,f.a.createElement(v.b,{className:"login-form-forgot",to:"/user/forget"},"\u5bc6\u7801\u5fd8\u8bb0\u4e86\uff1f"),f.a.createElement(y.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),"Or ",f.a.createElement("a",{onClick:this.linkToRegister},"\u73b0\u5728\u6ce8\u518c\u5427!")))}}]),t}(f.a.Component))||a)||a),S=b.a.create({name:"normal_login"})(I);t.default=S}}]);
//# sourceMappingURL=9.53ca2a2f.chunk.js.map