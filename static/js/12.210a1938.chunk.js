(this["webpackJsonpmelody-world-client"]=this["webpackJsonpmelody-world-client"]||[]).push([[12],{633:function(e,t,n){e.exports={span:"UserHeader_span__1doib"}},709:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(35),c=n(193),i=n(260),s=n(6),l=n.n(s),u=n(70),f=n(172);function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},E=function(e){function t(){var e;return d(this,t),(e=b(this,v(t).apply(this,arguments))).state={scale:1,mounted:!1,isImgExist:!0},e.setScale=function(){if(e.avatarChildren&&e.avatarNode){var t=e.avatarChildren.offsetWidth,n=e.avatarNode.offsetWidth;0===t||0===n||e.lastChildrenWidth===t&&e.lastNodeWidth===n||(e.lastChildrenWidth=t,e.lastNodeWidth=n,e.setState({scale:n-8<t?(n-8)/t:1}))}},e.handleImgLoadError=function(){var t=e.props.onError;!1!==(t?t():void 0)&&e.setState({isImgExist:!1})},e.renderAvatar=function(t){var n,o,a=t.getPrefixCls,c=e.props,i=c.prefixCls,s=c.shape,f=c.size,p=c.src,d=c.srcSet,h=c.icon,b=c.className,v=c.alt,g=O(c,["prefixCls","shape","size","src","srcSet","icon","className","alt"]),E=e.state,w=E.isImgExist,S=E.scale,j=(E.mounted,a("avatar",i)),C=l()((y(n={},"".concat(j,"-lg"),"large"===f),y(n,"".concat(j,"-sm"),"small"===f),n)),x=l()(j,b,C,(y(o={},"".concat(j,"-").concat(s),s),y(o,"".concat(j,"-image"),p&&w),y(o,"".concat(j,"-icon"),h),o)),N="number"===typeof f?{width:f,height:f,lineHeight:"".concat(f,"px"),fontSize:h?f/2:18}:{},P=e.props.children;if(p&&w)P=r.createElement("img",{src:p,srcSet:d,onError:e.handleImgLoadError,alt:v});else if(h)P="string"===typeof h?r.createElement(u.a,{type:h}):h;else{if(e.avatarChildren||1!==S){var k="scale(".concat(S,") translateX(-50%)"),_={msTransform:k,WebkitTransform:k,transform:k},I="number"===typeof f?{lineHeight:"".concat(f,"px")}:{};P=r.createElement("span",{className:"".concat(j,"-string"),ref:function(t){return e.avatarChildren=t},style:m(m({},I),_)},P)}else{P=r.createElement("span",{className:"".concat(j,"-string"),style:{opacity:0},ref:function(t){return e.avatarChildren=t}},P)}}return r.createElement("span",m({},g,{style:m(m({},N),g.style),className:x,ref:function(t){return e.avatarNode=t}}),P)},e}var n,o,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.setScale(),this.setState({mounted:!0})}},{key:"componentDidUpdate",value:function(e){this.setScale(),e.src!==this.props.src&&this.setState({isImgExist:!0,scale:1})}},{key:"render",value:function(){return r.createElement(f.a,null,this.renderAvatar)}}])&&h(n.prototype,o),a&&h(n,a),t}(r.Component);E.defaultProps={shape:"circle",size:"default"};var w=n(633),S=n.n(w);t.default=Object(a.b)((function(e){return{login:e.login}}),(function(){return{}}))(Object(i.f)((function(e){var t=e.login,n=t.isLogin,a=t.user,i=void 0===a?{}:a,s=function(t){var n=window.location.href.replace(window.location.origin,""),r="/"===n?"":"?callback=".concat(n);e.history&&e.history.push("".concat(t).concat(r))},l=Object(r.useRef)(o.a.createElement("div",{style:{color:"#B4CDCD"}},o.a.createElement("a",{className:S.a.span,onClick:function(){return s("/login")}},"\u767b\u5f55"),"|",o.a.createElement("a",{className:S.a.span,onClick:function(){return s("/register")}},"\u6ce8\u518c")));return n?o.a.createElement("div",null,o.a.createElement(c.b,{to:"/user"},o.a.createElement(E,{src:i.headerImgUrl,style:{background:"#fff"}}))):l.current})))}}]);
//# sourceMappingURL=12.210a1938.chunk.js.map