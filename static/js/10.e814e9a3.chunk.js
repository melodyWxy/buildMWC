(this["webpackJsonpmelody-world-client"]=this["webpackJsonpmelody-world-client"]||[]).push([[10],{286:function(e,a){},287:function(e,a){},307:function(e,a){},309:function(e,a){},623:function(e,a,t){e.exports={form:"Register_form__2ap8N"}},701:function(e,a,t){"use strict";t.r(a);var r,n,s=t(5),o=t.n(s),i=t(75),l=t(76),c=t(78),m=t(77),u=t(79),p=t(0),d=t.n(p),f=t(35),b=t(174),g=t(704),h=t(173),w=t(349),y=t(70),E=t(705),v=t(692),D=t(260),P=t(281),k=t.n(P),I=t(33),j=t(623),O=t.n(j),x=Object(p.lazy)((function(){return Promise.all([t.e(6),t.e(15)]).then(t.bind(null,694))})),S={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},C={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},F=(r=Object(f.b)((function(e){return{login:e.login}}),(function(e){return{dispatch:e}})),Object(D.f)(n=r(n=function(e){function a(){var e,t;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=Object(c.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(n)))).state={confirmDirty:!1,autoCompleteResult:[]},t.imgData={},t.handleSubmit=function(e){e.preventDefault(),t.props.form.validateFieldsAndScroll((function(e,a){var r,n,s,i,l;return o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=13;break}return r=t.imgData,n=r.headerImgUrl,s=r.headerImgName,n&&(a.headerImgUrl=n),s&&(a.headerImgName=s),i=new k.a(t.publicDer),a.nickname=i.encrypt(a.nickname,"base64","utf8"),a.password=i.encrypt(a.password,"base64","utf8"),a.confirm=i.encrypt(a.confirm,"base64","utf8"),console.log("\u5c0f\u670b\u53cb\u4f60\u5728\u770b\u4ec0\u4e48\u561e?",a),c.next=11,o.a.awrap(Object(I.b)("/register",a));case 11:(l=c.sent).isSuccess?(b.a.success(l.msg||""),setTimeout((function(){t.props.history.push("/login".concat(window.location.href.replace(window.location.origin+"/register","")))}),800)):b.a.error(l.msg||"");case 13:case"end":return c.stop()}}))}))},t.handleConfirmBlur=function(e){var a=e.target.value;t.setState({confirmDirty:t.state.confirmDirty||!!a})},t.compareToFirstPassword=function(e,a,r){var n=t.props.form;a&&a!==n.getFieldValue("password")?r("Two passwords that you enter is inconsistent!"):r()},t.validateToNextPassword=function(e,a,r){var n=t.props.form;a&&t.state.confirmDirty&&n.validateFields(["confirm"],{force:!0}),r()},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.publicDer=window.localStorage.getItem("publicDer"),this.publicDer||Object(I.a)("/der/getPublicDer").then((function(a){200===a.code?(e.publicDer=a.data.publicDer,window.localStorage.setItem("publicDer",e.publicDer)):b.a.error(a.msg||"\u83b7\u53d6\u516c\u94a5\u5931\u8d25\uff01")})).catch((function(e){console.log(e),b.a.error("\u83b7\u53d6\u516c\u94a5\u5931\u8d25\uff01\u60a8\u7684\u7f51\u7edc\u662f\u5426\u5df2\u6253\u5f00\uff1f")}))}},{key:"render",value:function(){var e=this,a=this.props.form.getFieldDecorator;return d.a.createElement(g.a,Object.assign({},S,{onSubmit:this.handleSubmit,className:O.a.form}),d.a.createElement(g.a.Item,{label:d.a.createElement("span",null,"Head portrait\xa0")},d.a.createElement(p.Suspense,{fallback:d.a.createElement(h.a,{size:"large"})},d.a.createElement(x,{updateImgDate:function(a){console.log(a),e.imgData=a}}))),d.a.createElement(g.a.Item,{label:d.a.createElement("span",null,"Username\xa0",d.a.createElement(w.a,{title:"\u4e5f\u4f5c\u4e3a\u4f60\u7684\u6635\u79f0(nickname)"},d.a.createElement(y.a,{type:"question-circle-o"})))},a("nickname",{rules:[{required:!0,message:"Please input your nickname!",whitespace:!0}]})(d.a.createElement(E.a,null))),d.a.createElement(g.a.Item,{label:"Password",hasFeedback:!0},a("password",{rules:[{required:!0,message:"Please input your password!"},{validator:this.validateToNextPassword}]})(d.a.createElement(E.a.Password,null))),d.a.createElement(g.a.Item,{label:"Confirm Password",hasFeedback:!0},a("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(d.a.createElement(E.a.Password,{onBlur:this.handleConfirmBlur}))),d.a.createElement(g.a.Item,{label:"E-mail"},a("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(d.a.createElement(E.a,null))),d.a.createElement(g.a.Item,C,d.a.createElement(v.a,{type:"primary",htmlType:"submit"},"Register")))}}]),a}(d.a.Component))||n)||n),T=g.a.create({name:"register"})(F);a.default=T}}]);
//# sourceMappingURL=10.e814e9a3.chunk.js.map