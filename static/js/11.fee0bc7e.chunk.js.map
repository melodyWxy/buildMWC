{"version":3,"sources":["utils/lifeHooks.js","components/Logo/index.module.css","router/index.module.css","router/menu.config.js","components/Menu/TopMenu.js","components/Menu/SiderMenu.js","components/PortalModal/index.js","components/Logo/index.js","router/index.js"],"names":["useConstructor","initStateObj","initState","setStateApis","initStateKeys","Object","keys","map","item","useState","stateRef","useRef","setState","targetState","callback","targetKeys","key","find","Error","current","state","useComponentDidMount","fn","useEffect","useComponentWillUnmount","useLayoutEffect","module","exports","topMenuConfig","to","title","value","TopMenuItems","Item","TopMenu","props","path","handleTopMenuChange","theme","mode","selectedKeys","style","lineHeight","onSelect","SubMenu","Menu","renderItems","list","type","SiderMenu","handleSiderMenuChange","siderMenuItems","blobList","filter","videoList","paddingTop","window","location","pathname","replace","PortalModal","dom","children","parent","document","body","DOMRef","createElement","appendChild","removeChild","ReactDom","createPortal","LargeLogo","className","styles","llw","onClick","src","logo","showLogoLarge","logopng","Home","lazy","Blobs","ClassVideo","User","Login","Register","UploadAdmin","UserHeader","Header","Layout","Content","Footer","Sider","RouterIndex","connect","dispatch","updateSiderMenu","department","xPost","then","res","code","msg","data","message","error","siderKey","selectItem","one","getMDBysiderKey","isBlobs","indexOf","isClassVideo","isHome","payload","values","pnList","split","this","fallback","layout","header","logobox","Logo","topMenuItems","collapsible","sider","width","collapsedWidth","padding","background","height","borderRadius","overflow","textAlign","href","target","Component"],"mappings":"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","file":"static/js/11.fee0bc7e.chunk.js","sourcesContent":["import  {useState,useMemo,useEffect,useRef,useLayoutEffect} from 'react';\n\n// 屠龙术 - 宇宙加强版仿生命周期自定义hooks；\n\n\n// initStateObj : {}    =>   相当于类组件里初始化的state;\nexport function useConstructor(initStateObj = {}){\n    const initState =  {};\n    const setStateApis = {};\n    const initStateKeys = Object.keys(initStateObj);\n    initStateKeys.map(function useMapState(item){\n        [\n            initState[item],\n            setStateApis[item]\n        ] = useState(initStateObj[item]);\n    })\n    const stateRef = useRef(initState);\n    \n    const setState = (targetState = {},callback)=> {\n        const targetKeys = Object.keys(targetState);\n        targetKeys.map( key => {\n            //判断是否初始化过，如果没有，则不能直接更新;\n            const initItem = initStateKeys.find(item=>item===key);\n            if(initItem === null){\n                throw new Error(`\n                    不支持更新没有初始化过的state:${key},\n                    请在useConstructor的时候初始state:${key}\n                `);\n            }\n            setStateApis[key](targetState[key]);\n            stateRef.current[key] = targetState[key];\n        })\n\n        callback && callback(stateRef.current);\n    }\n\n    return {\n        state: stateRef.current,\n        setState\n    };\n}\n\n\n\n // fn   在comopnentDidMount的时候会执行这个函数\nexport function useComponentDidMount(fn){\n    useEffect(fn,[])\n}\n\n//fn   在componentWillReceiveProps的时候会执行这个函数 默认形参:preProps，nextProps\n//props 只需把组件的props传进来\nexport function useComponentWillReceiveProps(fn,props){\n    const propRef = useRef(props);\n    useMemo(()=>{\n        fn(propRef.current,props);\n        propRef.current = props;\n    },Object.values(props))\n}\n\n// fn componentWillUnmount\nexport function useComponentWillUnmount(fn){\n    useLayoutEffect(()=>{\n        return fn\n    },[])\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logopng\":\"Logo_logopng__zmPM8\",\"llw\":\"Logo_llw__ooGaa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"router_layout__1NqRB\",\"header\":\"router_header__3dtWS\",\"sider\":\"router_sider__29EAm\",\"logobox\":\"router_logobox__2CVvP\",\"userbox\":\"router_userbox__3HqvH\",\"topMenuItems\":\"router_topMenuItems__3rAZ8\"};","\nexport const topMenuConfig = [{\n    key:'/',\n    to:'/',\n    title:'主页',\n    value:'home',\n},{\n    key:'/js',\n    to:'/js',\n    title:'js核心',\n    value:'js',\n},{\n    key:'/react_0',\n    to:'/react_0',\n    title:'react基础',\n    value:'react_0',\n},{\n    key:'/react_1',\n    to:'/react_1',\n    title:'react高阶',\n    value:'react_1',\n},{\n    key:'/react_2',\n    to:'/react_2',\n    title:'react拓展',\n    value:'react_2',\n},{\n    key:'/webpack',\n    to:'/webpack',\n    title:'webpack',\n    value:'webpack',\n},{\n    key:'/es6',\n    to:'/es6',\n    title:'es6+拓展',\n    value:'es6',\n},{\n    key:'/realcc',\n    to:'/realcc',\n    title:'大前端拓展',\n    value:'realcc',\n},{\n    key:'/friend',\n    to:'/friend',\n    title:'赞助',\n    value:'friend',\n}];\n\nexport const siderMenuConfig = [{\n    key:'/',\n    to:'/',\n    title:'概述',\n    value:'home'\n},{\n    key:'/blobs',\n    to:'/blobs',\n    title:'博客',\n    value:'blobs'\n},{\n    key:'/class_video',\n    to:'/class_video',\n    title:'课程',\n    value:'class_video'\n}]","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {Menu} from 'antd';\nimport { topMenuConfig } from '../../router/menu.config';\n\n\nconst TopMenuItems = topMenuConfig.map(item=>(\n    <Menu.Item key={item.key}><Link to={item.to}>{item.title}</Link></Menu.Item>\n))\n\nexport function TopMenu(props){\n    const {path = '/', handleTopMenuChange } = props;\n    return (\n        <Menu\n            theme=\"dark\"\n            mode=\"horizontal\"\n            selectedKeys={[path]}\n            style={{ lineHeight: '64px' }}\n            onSelect= {handleTopMenuChange}\n        >\n            {TopMenuItems}\n        </Menu>\n    )\n}\nexport default TopMenu;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {Menu,Icon} from 'antd';\n\nconst {SubMenu} = Menu;\n\nfunction renderItems (list,path) {\n    return list.map(item=>(\n        <Menu.Item\n            key={'/'+item.type+'/'+item.key}\n        >\n            <Link to={path==='/'?path+item.type+ '/'+item.key:path+'/'+item.type+'/'+item.key}>\n                {item.title}\n            </Link>\n        </Menu.Item>\n    ))\n}\n\n\nexport function SiderMenu(props){\n\n    const { path, handleSiderMenuChange, siderMenuItems=[]  } = props;\n    const blobList = siderMenuItems.filter(item=>item.type==='blobs');\n    const videoList = siderMenuItems.filter(item=>item.type==='class_video');\n    return (\n        <Menu\n            theme=\"dark\"\n            mode=\"inline\"\n            style={{paddingTop:\"10px\"}}\n            selectedKeys={[window.location.pathname.replace(path+'/','/')]}\n            onSelect={ handleSiderMenuChange }\n        >\n            <Menu.Item key={path}>\n                <Link to={path} >\n                    <Icon type=\"inbox\" /> \n                    概述\n                </Link>\n            </Menu.Item>\n            <SubMenu key='/blobs' title={\n                <span>\n                    <Icon type=\"inbox\" />\n                    博客\n                </span>\n            }>\n                {renderItems(blobList,path)}\n            </SubMenu>\n            <SubMenu key='/class_video' title={\n                <span>\n                    <Icon type=\"inbox\" />\n                    课程\n                </span>\n            }>\n                {renderItems(videoList,path)}\n            </SubMenu>\n        </Menu>\n    )\n}\nexport default SiderMenu;\n","\nimport {useRef} from 'react';\nimport ReactDom from 'react-dom';\nimport { useComponentDidMount,useComponentWillUnmount } from './../../utils/lifeHooks';\n\n// 基于react - Portals 的弹窗\n// Portal 提供了一种将子节点渲染到存在于父组件以外的 DOM 节点的优秀的方案。\n\n/**\n *  @props\n *      dom :  dom  挂载节点\n *      children :  any  插槽   弹窗里的内容\n */\n\nexport default function PortalModal(props){\n    const {dom, children} = props;\n    const parent = dom || document.body;\n    const DOMRef = useRef(document.createElement('div'));\n\n    useComponentDidMount(()=>{\n        parent.appendChild(DOMRef.current);\n    })\n\n    useComponentWillUnmount(()=>{\n        parent.removeChild(DOMRef.current);\n    })\n    return ReactDom.createPortal(\n        children,\n        DOMRef.current\n    )\n\n\n}\n","import React, {useState} from 'react';\nimport logo from './../../static/logo.png';\nimport PortalModal from './../PortalModal';\nimport styles from './index.module.css';\n\n\nfunction LargeLogo (props){\n    return (\n        <div \n            className={styles.llw}\n            onClick = {props.onClick}\n        >\n            <img  \n                src= {logo}\n            />\n        </div>\n    )\n}\n\n\n\nexport default function (){\n    const [showLogoLarge,setState] = useState(false); \n\n\n    return (\n        <>\n            <img  \n                className={styles.logopng} \n                src= {logo}\n                onClick = {()=>setState(true)}\n            />\n            {showLogoLarge&&(<PortalModal>\n                <LargeLogo \n                    onClick = {()=>setState(false)}\n                />\n            </PortalModal>)}\n        </>\n) \n\n\n}","\nimport React,{Component,lazy,Suspense} from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\nimport { connect } from 'react-redux';\nimport { Layout, Spin, message } from 'antd';\nimport TopMenu from './../components/Menu/TopMenu';\nimport SiderMenu from './../components/Menu/SiderMenu';\nimport Logo from './../components/Logo';\nimport { xPost } from './../utils/xFetch';\nimport {topMenuConfig} from './menu.config';\nimport styles from './index.module.css';\n\n\n//pages\nconst Home = lazy(()=>import('../pages/Home'));\nconst Blobs = lazy(()=>import('../pages/Blobs'));\nconst ClassVideo = lazy(()=>import('../pages/ClassVideo'))\nconst User = lazy(()=>import('../pages/User')) ;\nconst Login = lazy(()=>import('../pages/Login'));\nconst Register = lazy(()=>import('../pages/Register'));\nconst UploadAdmin = lazy(()=>import('../pages/UploadAdmin'));\n\n//components\nconst UserHeader= lazy(()=>import('../components/UserHeader'));\n\n\nconst { Header, Content, Footer, Sider } = Layout;\n\n\n@connect(()=>({}),dispatch=>({\n    dispatch\n}))\nclass RouterIndex extends Component{ \n    constructor(props){\n        super(props);\n        const  { pathname } = window.location;\n        const  pnList  = pathname.split('/');\n        // 一级路由\n        let path = pnList[1]?'/'+pnList[1]:'/'; \n        // 二级路由\n        let siderKey = pnList[2]?'/'+pnList[2]:'/';\n        if(path==='/'||path==='/blobs'||path==='/class_video'){\n            siderKey = path ;\n            path = '/';\n        }\n        this.state = {\n            // topMenu控制的一级路由\n            path,\n            // siderMenu控制的二级路由\n            siderKey,\n            siderMenuItems:[] \n        }\n    }\n\n    componentDidMount(){\n\n        //更新左边menu\n        const {path,siderKey} = this.state;\n        const selectItem = topMenuConfig.find(item=>item.to===path);\n        if(!selectItem){\n            return ;\n        }\n        const department = selectItem.value;\n\n        this.updateSiderMenu(department);\n        this.getMDBysiderKey(siderKey);\n    }\n\n    // 更新左边menu\n    updateSiderMenu = (department) => {\n        xPost('/blob/getAllTitle',{\n            department\n        })    \n            .then(res=>{\n                const {code,msg='',data=[]} = res||{};\n                if(code!==200){\n                    return message.error(msg);\n                }\n                this.setState({\n                    siderMenuItems:data\n                })\n            })\n\n    }\n\n    handleTopMenuChange = item => {\n        this.setState({\n            path:item.key,\n            siderKey:'/'\n        })\n        const selectItem = topMenuConfig.find(one=>one.to===item.key);\n        if(!selectItem){\n            return ;\n        }\n        const department = selectItem.value;\n        this.updateSiderMenu(department);\n        this.getMDBysiderKey(item.key);\n    }\n\n    handleSiderMenuChange = item => {\n        this.setState({\n            siderKey: item.key\n        })\n        this.getMDBysiderKey(item.key);\n    }\n\n    getMDBysiderKey =  (siderKey='')  => {\n        const isBlobs = siderKey.indexOf('blobs')!==-1; \n        const isClassVideo = siderKey.indexOf('class_video')!==-1;\n        const isHome = !isBlobs && !isClassVideo; \n        const {dispatch} = this.props;\n        let key;\n        if(isBlobs){\n            key = siderKey.replace('/blobs/','');\n            dispatch({\n                type:\"UPDATE_BLOBMD\",\n                payload: {\n                    values:{\n                        key\n                    }\n                }\n            })\n        }\n        if(isClassVideo){\n            key = siderKey.replace('/class_video/','');\n        }\n        if(isHome){\n            key = siderKey === '/'?  'home-home': siderKey.replace('/','')+'-home' ;\n            dispatch({\n                type:\"UPDATE_HOMEMD\",\n                payload: {\n                    values:{\n                        key\n                    }\n                }\n            })\n        }\n    }\n\n    render(){\n        const { path,siderKey,siderMenuItems } = this.state;\n        return (\n            <Router >\n                <Switch>\n                    <Route path='/register'>\n                        <Suspense fallback={<Spin />}>\n                            <Register />\n                        </Suspense>\n                    </Route>\n                    <Route path=\"/login\">\n                        <Suspense fallback={<Spin />}>\n                            <Login />\n                        </Suspense>\n                    </Route>\n                    <Route path=\"/uploadAdmin\">\n                        <Suspense fallback={<Spin />}>\n                            <UploadAdmin />\n                        </Suspense>\n                    </Route>\n                    <Route path=\"/\">\n                        <Layout className={styles.layout}>\n                            <Header className={styles.header} >\n                                    <div className={styles.logobox}>\n                                        <Logo />\n                                    </div>\n                                    <div  className={styles.topMenuItems}>\n                                        <TopMenu \n                                            path={path}\n                                            handleTopMenuChange={this.handleTopMenuChange}\n                                        />\n                                    </div>\n                                    <UserHeader />\n                            </Header>\n                                <Layout>\n                                    <Sider \n                                        theme=\"dark\" \n                                        collapsible={true}  \n                                        className={styles.sider}\n                                        width={150}\n                                        collapsedWidth={0}\n                                    >\n                                      <SiderMenu \n                                        handleSiderMenuChange={this.handleSiderMenuChange}\n                                        path={path}\n                                        siderKey={siderKey}\n                                        siderMenuItems = {siderMenuItems}\n                                      />\n                                    </Sider>\n                                    <Content style={{ padding: '20px 30px 0 40px' }}>\n                                        <div style={{ background: '#fff', padding: 24, height:'100%',borderRadius:'10px',overflow:'hidden' }}>\n                                            <Switch>\n                                                <Route path=\"/user\">\n                                                    <Suspense fallback={<Spin />}>\n                                                        <User />\n                                                    </Suspense>\n                                                </Route>\n                                                <Route path=\"/blobs\">\n                                                    <Suspense fallback={<Spin />}>\n                                                        <Blobs />\n                                                    </Suspense>\n                                                </Route>\n                                                <Route path=\"/class_video\">\n                                                    <Suspense fallback={<Spin />}>\n                                                        <ClassVideo />\n                                                    </Suspense>\n                                                </Route>\n                                                <Route path=\"/*/blobs\">\n                                                    <Suspense fallback={<Spin />}>\n                                                        <Blobs />\n                                                    </Suspense>\n                                                </Route>\n                                                <Route path=\"/*/class_video\">\n                                                    <Suspense fallback={<Spin />}>\n                                                        <ClassVideo />\n                                                    </Suspense>\n                                                </Route>\n                                                <Route path=\"/*/\">\n                                                    <Suspense fallback={<Spin />}>\n                                                        <Home />\n                                                    </Suspense>\n                                                </Route>\n  \n                                            </Switch>\n                                        </div>\n                                    </Content>\n                                </Layout>\n                                <Footer style={{ textAlign: 'center' }}>\n                                    <div>\n                                        MW ©2020 Created by melodyWxy\n                                    </div>\n                                    <div>\n                                        <a href='http://www.beian.miit.gov.cn/' target='_blank' >浙ICP备20001308号</a>\n                                    </div>\n                                </Footer>\n                            </Layout>\n                    </Route>\n                </Switch>\n\n            </Router>\n        );\n    }\n}\n\nexport default  RouterIndex;"],"sourceRoot":""}