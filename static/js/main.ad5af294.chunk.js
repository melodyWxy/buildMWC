(this["webpackJsonpmelody-world-client"]=this["webpackJsonpmelody-world-client"]||[]).push([[3],{116:function(e,t,r){e.exports=r(171)},125:function(e,t,r){},171:function(e,t,r){"use strict";r.r(t);var n,a=r(0),c=r.n(a),o=r(15),s=r.n(o),u=r(35),i=(r(125),r(126),r(75)),p=r(76),l=r(78),b=r(77),f=r(79),d=r(173),v=r(84),O=r.n(v),h=r(99),y=r.n(h),j=Object(a.lazy)((function(){return Promise.all([r.e(7),r.e(11)]).then(r.bind(null,706))})),w=Object(u.b)((function(e){return{login:e.login}}),(function(e){return{dispatch:e}}))(n=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.login,r=e.dispatch;if(t&&!t.isLogin){var n=window.localStorage.getItem("loginCookie");n&&"/login"!==window.location.pathname&&r({type:"USER_LOGIN",payload:{values:{cookie:n}}})}}},{key:"render",value:function(){return c.a.createElement(a.Suspense,{fallback:c.a.createElement("div",{className:y.a.app},c.a.createElement("img",{src:O.a}),c.a.createElement(d.a,null))},c.a.createElement(j,null))}}]),t}(a.Component))||n,g=r(18),m=r(45),x=r(5),k=r.n(x),P="LOGIN",E=r(10),S=r(33);function D(e){var t;return k.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k.a.awrap(Object(S.b)("/login",e));case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}))}var _=r(174);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=k.a.mark(B),U=k.a.mark(N);function B(e){var t,r,n,a,c,o,s,u;return k.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=(r=void 0===t?{}:t).values,a=r.callback,i.next=4,Object(E.a)(D,n);case 4:if(c=i.sent,o=c.isSuccess,s=c.data,u=c.msg,o){i.next=10;break}_.a.warning(u),i.next=15;break;case 10:return s.user.headerImgUrl||(s.user.headerImgUrl="https://melodyworld.oss-cn-beijing.aliyuncs.com/headers/defaultheader0.1.jpeg?x-oss-process=style/_90_90"),i.next=13,Object(E.b)({type:P,payload:{user:s.user}});case 13:a&&a(s),window.localStorage.setItem("loginCookie",s.cookie);case 15:case"end":return i.stop()}}),M)}function N(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.c)("USER_LOGIN",B);case 2:case"end":return e.stop()}}),U)}var A={isLogin:!1,user:{}};var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=void 0===r?"":r,a=t.payload,c=void 0===a?{}:a,o=c.user,s=void 0===o?{}:o;switch(n){case P:return I({},e,{isLogin:!0,user:s});default:return e}},T="blobs_update";function G(e){var t;return k.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,k.a.awrap(Object(S.b)("/blob",e));case 3:return t=r.sent,r.abrupt("return",t);case 5:case"end":return r.stop()}}))}function J(e){var t;return k.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k.a.awrap(Object(S.b)("/blob/upload",e));case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}))}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){Object(m.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z=k.a.mark(q),H=k.a.mark(F),X=k.a.mark(K),$=k.a.mark(Q);function q(e){var t,r,n,a,c,o,s,u;return k.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=(r=void 0===t?{}:t).values,a=r.callback,i.next=4,Object(E.a)(G,n);case 4:if(c=i.sent,o=c.isSuccess,s=c.data,u=void 0===s?{}:s,o){i.next=10;break}_.a.error("\u6ca1\u6709\u8fd9\u4e2a\u6587\u6863\u5462~"),i.next=13;break;case 10:return i.next=12,Object(E.b)({type:T,payload:{blobMd:u.md}});case 12:a&&a(u);case 13:case"end":return i.stop()}}),z)}function F(e){var t,r,n,a;return k.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=(r=void 0===t?{}:t).values,r.callback,c.next=4,Object(E.a)(J,n);case 4:if(a=c.sent,console.log(a),a.isSuccess){c.next=8;break}return c.abrupt("return",_.a.error(a.msg));case 8:case"end":return c.stop()}}),H)}function K(e){var t,r,n,a,c,o,s,u;return k.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=(r=void 0===t?{}:t).values,a=r.callback,i.next=4,Object(E.a)(G,n);case 4:if(c=i.sent,o=c.isSuccess,s=c.data,u=void 0===s?{}:s,o){i.next=10;break}_.a.error("\u6ca1\u6709\u8fd9\u4e2a\u6587\u6863\u5462~"),i.next=13;break;case 10:return i.next=12,Object(E.b)({type:T,payload:{homeMd:u.md}});case 12:a&&a(u);case 13:case"end":return i.stop()}}),X)}function Q(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.c)("UPDATE_BLOBMD",q);case 2:return e.next=4,Object(E.c)("UPLOAD_BLOBS",F);case 4:return e.next=6,Object(E.c)("UPDATE_HOMEMD",K);case 6:case"end":return e.stop()}}),$)}var V={blobMd:"",homeMd:"",videoSrc:""};var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=void 0===r?"":r,a=t.payload,c=void 0===a?{}:a;switch(n){case T:return W({},e,{},c);default:return e}},Z=Object(g.c)({login:C,blobs:Y}),ee=r(104),te=Object(ee.a)(),re=Object(g.e)(Z,Object(g.a)(te));te.run(N),te.run(Q);var ne=re;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(u.a,{store:ne},c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},33:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s}));var n=r(5),a=r.n(n),c="http://120.27.61.111:8806";function o(e){var t;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.a.awrap(fetch(c+e).then((function(e){return e.json()})).catch(console.error));case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}))}function s(e,t){var r;return a.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.awrap(fetch(c+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch(console.error));case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}))}},84:function(e,t,r){e.exports=r.p+"static/media/logo.6c89b074.png"},99:function(e,t,r){e.exports={app:"App_app__1kX79"}}},[[116,4,5]]]);
//# sourceMappingURL=main.ad5af294.chunk.js.map